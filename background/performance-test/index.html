<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.vectorly.io/ai-filters/v1/dev/7f8deff/vectorly.filters.js"></script>
</head>
<body>


<div style="width: 650px;">
    <div style="float: left; width: 300px;">
        <b>Is Supported on this Browser?</b>
        <pre id="supported">Browser is not supported</pre>
    </div>

    <div style="float: right; width: 300px; display: none;" id="performance-check">
        <b>Performance Check:</b>
        <p></p>
        <input id="button" type="button" value="Run performance check" onclick="runPerformanceCheck()">
        <br/>
        <div id="msg"></div>

        <pre id="output"></pre>
    </div>


</div>




<script>

    const output = document.getElementById('output');
    const msg = document.getElementById('msg');
    const button = document.getElementById('button');
    const BackgroundFilter = vectorly.BackgroundFilter;



    try{
        document.getElementById('supported').textContent = JSON.stringify(BackgroundFilter.isSupported(), undefined, 2);
        document.getElementById('performance-check').style.display = "block";
    } catch (e) {


    }



    function runPerformanceCheck(){

        msg.textContent = "Running performance check...";

        button.style.display = "none";
        output.textContent = "";

        BackgroundFilter.checkPerformance({token: getUrlParams('token') || '0b5707c6-6642-4cc8-8570-b29af9e51345',}).then(function (result){
            console.log("Performance check complete");

            button.style.display = "block";

            msg.textContent = "Performance check complete";

            document.getElementById('output').textContent = JSON.stringify(result, undefined, 2);

        }).catch(function (e){

            console.warn("An error ocurred while checking the performance");
            console.log(e);


        });
    }


    function getUrlParams(prop) {
        window.searchParams = window.searchParams || (new URLSearchParams(window.location.search));
        return window.searchParams.get(prop)
    }



</script>
</body>
</html>